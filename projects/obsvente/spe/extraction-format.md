# Spécification - extraction ObsVente v2

ObsVente extraction format is based on the [ICES RDB data exchange format](https://www.ices.dk/data/Documents/RDB/RDB%20Exchange%20Format.pdf).
EU/ICES have defined common format and processing tools, for fisheries statistics (.e.Gg R scripts - see COST project).

## Data types

In the rest of the document :
- `Req.` stands for required. In the Req. column the “M” stands for mandatory and “O” stands for optional.
- `*` = key field (warning: can be null)

## Trip (TR)

A commercial fishing trip that has been sampled on board or a sample from a fish market.

| Field name                   | Type    | Req.    | Basic checks  | Comments                                                                                                                                                                  | Écran                                      |
|------------------------------|---------|---------|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
| Sampling type * 	            | String  | M     	 | Code list     | “S” = sea sampling                                                                                                                                                        |                                            |
| Landing country *            | String  | M     	 | Code list     | ISO 3166 – 1 alpha-3 codes: the country where the vessel is landing and selling the catch.                                                                                |                                            |
| Vessel flag country *        | String  | M       | Code list     | ISO 3166 – 1 alpha-3 codes: the flag country of the vessel. This can be different from the landing country (see description of Landing country).                          |                                            |
| Year *                       | Integer | M       | 1 900 − 3 000 |                                                                                                                                                                           |                                            |
| Project *                    | String  | M       | Code list     | National project name. Code list is editable.                                                                                                                             |                                            |
| Trip code *                  | String  | M       | String 50     | Automatic number (Filled by system)                                                                                                                                       | Identifiant unique de la marée             |
| Vessel length                | Integer | O       | 3 − 160       | Over-all length in metres.                                                                                                                                                | cf. Référentiel > Navires                  |
| Vessel power                 | Integer | O       | 4 − 8 500     | Vessel power (kW).                                                                                                                                                        | cf. Référentiel > Navires                  | 
| Vessel size                  | Integer | O       | 1 − 2 500     | Gross registered tonnes (GRT).                                                                                                                                            | cf. Référentiel > Navires                  |
| Vessel type                  | Integer | M       | Code list     | Fixed value (4 = other boats).                                                                                                                                            |                                            |
| Harbour                      | String  | O       | Code list     | Landing harbour.                                                                                                                                                          | Calculée à partir du port de débarquement  |
| Number of sets/hauls on trip | Integer | O       | 1-300         | Total number of hauls/sets taken during the trip. Both the stations where biological measures were taken and the stations that were not worked up should be counted here. | Calculé par le système                     |
| Days at sea                  | Integer | O       | 1-60          | Difference between return and departure date, in days.                                                                                                                    | Calculé par le système                     |
| Vessel identifier            | Integer | O       | 1 − 999 999   | Vessel identifier.                                                                                                                                                        | Identifiant unique du navire (Référentiel) |
| Sampling country             | String  | M       | Code list     | ISO 3166 – 1 alpha-3 codes. The country that did the sampling.                                                                                                            |                                            |
| Sampling method              | String  | M       | Code list     | “Observer” or “SelfSampling”.                                                                                                                                             | Non saisie. Fixé à “Observer”              |

Custom columns, only for ObsVente:

| Field name      | Type   | Req. | Basic checks | Comments | Écran                  |
|-----------------|--------|------|--------------|----------|------------------------|
| SAMPLING_STRATA | String | M    | Code list    | .        | Sortie > Ligne de plan |
| **TODO**        | .      | .    | .            | .        |                        |


## Fishing operation (HH)

Detailed information about a fishing operation

| Field name                               | Type    | Req. | Basic checks                 | Comments                                                                                                              	                                                                                               | Écran                                                                            |
|------------------------------------------|---------|------|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| Sampling type * 	                        | String  | M    | Code list                    | “S” = sea sampling  	                                                                                                                                                                                                 |                                                                                  |
| Landing country *                        | String  | M    | Code list                    | ISO 3166 – 1 alpha-3 codes: the country where the vessel is landing and selling the catch.                                                                                                                            |                                                                                  |
| Vessel flag country *                    | String  | M    | Code list                    | ISO 3166 – 1 alpha-3 codes: the flag country of the vessel. This can be different from the landing country (see description of Landing country).                                                                      |                                                                                  |
| Year *                                   | Integer | M    | 1 900 − 3 000                |                                                                                                                                                                                                                       |                                                                                  |
| Project *                                | String  | M    | Code list                    | National project name. Code list is editable.                                                                                                                                                                         |                                                                                  |
| Trip code *                              | String  | M    | String 50                    | National coding system.                                                                                                                                                                                               |                                                                                  |
| Station number *                         | Integer | M    | 1-99999                      | Sequential numbering of hauls. Starting by 1 for each new trip.                                                                                                                                                       |                                                                                  |
| Fishing validity                         | String  | M/O  | Code list                    | I = Invalid, V = Valid. Mandatory for sampling type “S” and “M”.                                                                                                                                                      |                                                                                  |
| Aggregation level                        | String  | M/O  | Code list                    | Fixed value ”H” (= haul).                                                                                                                                                                                             |                                                                                  |
| Catch registration                       | String  | M    | Code list                    | The parts (landings/discards) of the catch, registered as: "All", "Lan", "Dis", "None" (1).                                                                                                                           | Calculé à partir du champs "Mesure individuelles ?" (Oui => "All", Non => "Lan") |
| Date                                     | String  | M    | “1900–01-01” to “2025–12–31” | “YYYY-MM-DD” (ISO 8601). Fishing starting date.                                                                                                                                                                       | Début de pêche (Fin du filage) > Date                                            |
| Time                                     | String  | O    | 00:00-23:59                  | Starting time. “HH:MM” in UTC/GTM (No daylight saving/summer time).                                                                                                                                                   | Début de pêche (Fin du filage) > Heure                                           |
| Fishing duration                         | Integer | M    | 5 − 99 999                   | In minutes.                                                                                                                                                                                                           | Calculé à partir de des dates début/fin pêche                                    |
| Pos.Start.Lat.dec.                       | Dec     | M    | 20.00000 − 80.00000          | Shooting (start) position in decimal degrees of latitude.                                                                                                                                                             | Latitude début de pêche                                                          |
| Pos.Start.Lon.dec.                       | Dec     | M    | −31.00000 − 31.00000         | Shooting (start) position in decimal degrees of longitude.                                                                                                                                                            | Longitude début de pêche                                                         |
| Pos.Stop.Lat.dec.                        | Dec     | M    | 20.00000 − 80.00000          | Hauling (stop) position in decimal degrees of latitude.                                                                                                                                                               | Latitude fin de pêche                                                            |
| Pos.Stop.Lon.dec.                        | Dec     | M    | −31.00000 − 31.00000         | Hauling (stop) position in decimal degrees of longitude.                                                                                                                                                              | Longitude fin de pêche                                                           |
| Area                                     | String  | O    | Code list                    | Not filled in ObsVente                                                                                                                                                                                                |                                                                                  |
| Statistical rectangle                    | String  | M    | Code list                    | Area level 5 in the Data Collection Regulation (EC, 2008a, 2008b). This is the ICES statistical rectangles (e.g. 41G9) except for the Mediterranean and Black Seas, where GFCM geographical subareas (GSAs) are used. | Calculé à partir de la position de fin de pêche                                  |
| Subpolygon                               | String  | O    | Code list                    | Not filled in ObsVente                                                                                                                                                                                                |                                                                                  |
| Main fishing depth                       | Integer | O    | 1−999                        | Depth from surface to groundrope in metres.                                                                                                                                                                           | Profondeur de l'engin (m)                                                        |
| Main water depth                         | Integer | O    | 1−999                        | Not filled in ObsVente                                                                                                                                                                                                |                                                                                  |
| Fishing activity category National       | String  | O    | Code list                    | National metier                                                                                                                                                                                                       | Calculé à partir du type d'engin et de l'espèce cible                            |
| Fishing activity category European lvl 5 | String  | O    | Code list                    | Not filled in ObsVente                                                                                                                                                                                                |                                                                                  |
| Fishing activity category European lvl 6 | String  | O    | Code list                    | Not filled in ObsVente                                                                                                                                                                                                |                                                                                  |

Custom columns, only for ObsVente:

| Field name | Type | Req. | Basic checks | Comments | Écran |
|------------|------|------|--------------|----------|-------|
| TODO       | .    | .    | .            | .        |       |

- (1) ”Catch registration”: This field describes the fraction of the catch that was registered. If the value “None” is used, Species Registration
  must also be assigned “None” (criteria to be checked):
  - ”All” SL record is expected for both landings and discards fractions. If there is no SL record, it is a true measured 0-value.
  - "Lan" SL record is expected only for the landed fraction. For this fraction, if there is no SL record, it is a true
    measured 0-value. For the discards, no SL record is expected because it has not been registered.
  - "Dis" SL record is expected only for the discarded fraction. For this fraction, if there is no SL record, it is a true
    measured 0-value. For the landings, no SL record is expected because it has not been registered.
  - "None" None. There are no SL records (criteria to be checked).

- (2) “Species registration”: This field describes whether all species or only a subset has been registered. If the value “None” is used,
  CatchRegistration must also be assigned “None”:
  - ”All” SL record is expected for all species in the given part of the catch. If there is no SL record, it is a true measured
    0-value.
  - "Par" Partial. SL record is expected only for some of the caught species. If there is no SL record, it is not known if
    it is a true measured 0-value. Please refer to the sam-pling protocol for an exact list of species which can be
    provided by the institute in charge of the given sampling.
  - "None" None. There are no SL records (criteria to be checked).

## Species list (SL)

The sorting strata defined by species, catch category, etc.

| Field name                       | Type    | Req. | Basic checks      | Comments                                                                                                              	                                                                                          | Écran                                                                                                   |
|----------------------------------|---------|------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| Sampling type *                  | String  | M    | Code list         | “S” = sea sampling  	                                                                                                                                                                                            |                                                                                                         |
| Landing country *                | String  | M    | Code list         | ISO 3166 – 1 alpha-3 codes: the country where the vessel is landing and selling the catch.                                                                                                                       |                                                                                                         |
| Vessel flag country *            | String  | M    | Code list         | ISO 3166 – 1 alpha-3 codes: the flag country of the vessel. This can be different from the landing country (see description of Landing country).                                                                 |                                                                                                         |
| Year *                           | Integer | M    | 1 900 − 3 000     |                                                                                                                                                                                                                  |                                                                                                         |
| Project *                        | String  | M    | Code list         | National project name. Code list is editable.                                                                                                                                                                    |                                                                                                         |
| Trip code *                      | String  | M    | String 50         | National coding system.                                                                                                                                                                                          |                                                                                                         |
| Station number *                 | Integer | M    | 1-99999           | Sequential numbering of hauls. Starting by 1 for each new trip.                                                                                                                                                  |                                                                                                         |
| Species *                        | Integer | M    | Code list         | The AphiaID, which is a 6 digit code, is used for the species in the species field. The AphiaIDs are maintained by WoRMS. Only species AphiaIDs with status “Accepted” or “Alternate Representation” is allowed. |                                                                                                         |
| Catch category *                 | String  | M    | Code list         | The fate of the catch: “DIS” = discard, “LAN” = landing.                                                                                                                                                         |                                                                                                         |
| Landing category *               | String  | M    | Code list         | Fixed value “HUC” = human consumption.                                                                                                                                                                           |                                                                                                         |
| Commercial size category scale * | String  | O    | Code list         | Commercial sorting scale code (optional for “Unsorted”)                                                                                                                                                          | Calculé automatiquement ('Nephros' pour langoustine, "Unsorted" pour la partie rejettée, et "EU" sinon) |
| Commercial size category *       | String  | O    | Code list         | Commercial sorting category in the given scale (optional for “Unsorted”).                                                                                                                                        | Capture > Partie retenue > Colonne catégorie                                                            |
| Subsampling category *           | String  | O    | Code list         | “VRAC“ = Vrac or “H-VRAC“ = Hors Vrac. Mandatory for catch category = “DIS“                                                                                                                                      |                                                                                                         |
| Sex *                            | String  | O    | Code list         | M = Male, F = Female (optional for “Unsexed”)                                                                                                                                                                    |                                                                                                         |
| Weight                           | Integer | M    | 1 − 9 999 999 999 | Whole weight in grams. Decimals not allowed. Weight of the corresponding stratum (Species – Catch category – size category – Subsampling category - Sex).                                                        |                                                                                                         |
| Subsample weight                 | Integer | O    | 1 − 9 999 999 999 | Whole weight in grams. Decimals not allowed. For sea sampling: the live weight of the subsample of the corresponding stratum.                                                                                    |                                                                                                         |
| Length code                      |         |      |                   | Class: 1 mm = “mm”, 0.5 cm = “scm”; 1 cm = “cm”; 2.5 cm = “25 mm”, 5 cm = “5 cm”.                                                                                                                                | Référentiel > Paramètre/PSFM > Précision et unité                                                       |

Custom columns, only for ObsVente:

| Field name             | Type  | Req. | Basic checks | Comments | Écran                                 |
|------------------------|-------|------|--------------|----------|---------------------------------------|
| NOT_OBSERVATION_REASON | .     | .    | .            | .        | Sortie > Raison de la non observation |
| **TODO**               | .     | .    | .            | .        |                                       |

## Haul length (HL)

Length frequency in the subsample of the stratum.
One record represents one length class.

| Field name                       | Type    | Req. | Basic checks  | Comments                                                                                                              	                                                                                          |
|----------------------------------|---------|------|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Sampling type *                  | String  | M    | Code list     | “S” = sea sampling                                                                                                                                                                                               |
| Landing country *                | String  | M    | Code list     | ISO 3166 – 1 alpha-3 codes: the country where the vessel is landing and selling the catch.                                                                                                                       |
| Vessel flag country *            | String  | M    | Code list     | ISO 3166 – 1 alpha-3 codes: the flag country of the vessel. This can be different from the landing country (see description of Landing country).                                                                 |
| Year *                           | Integer | M    | 1 900 − 3 000 |                                                                                                                                                                                                                  | 
| Project *                        | String  | M    | Code list     | National project name. Code list is editable.                                                                                                                                                                    |
| Trip code *                      | String  | M    | String 50     | National coding system.                                                                                                                                                                                          |
| Station number *                 | Integer | M    | 1-99999       | Sequential numbering of hauls. Starting by 1 for each new trip.                                                                                                                                                  |
| Species  *                       | Integer | M    | Code list     | Scientific name                                                                                                                                                                                                  |
| Catch category *                 | String  | M    | Code list     | The fate of the catch: “LAN” = Landing, “BMS” = Below Minimum Size landing, “DIS” = Discard or “REGDIS” = Logbook Registered Discard.                                                                            |
| Landing category *               | String  | M    | Code list     | The intended usage at the time of landing. This should match the same field in CL record (whether or not the fish was actually used for this or another purpose): “IND” = industry or “HUC” = human consumption. |
| Commercial size category scale * | String  | O    | Code list     | Commercial sorting scale code (optional for “Unsorted”)                                                                                                                                                          |
| Commercial size category *       | String  | O    | Code list     | Commercial sorting category in the given scale (optional for “Unsorted”). (EC, 2006) and later amendments when scale is “EU”.                                                                                    |
| Subsampling category *           | String  | O    | Code list     | “VRAC“ = Vrac or “H-VRAC“ = Hors Vrac. Mandatory for catch category = “DIS“                                                                                                                                      |
| Sex                              | String  | O    | Code list     | If M = Male, = , F = Female, (optional for “Unsexed”). Only different from “Sex” if individual length distribution is obtained on HL-level (and not on SL-level).                                                |
| Length class *                   | Integer | M    | 1 − 3 999     | In mm. Identifier: lower bound of size class, e.g. 650 for 65 – 66 cm.                                                                                                                                           |
| Number at length                 | Integer | M    | 1 − 999       | (not raised to whole catch) Length classes with zero should be excluded from the record.                                                                                                                         |


| Field name | Type    | Req. | Basic checks | Comments | Écran |
|------------|---------|------|--------------|----------|-------|
| PHOTO_ID   | Integer | .    | .            | .        |       |
| **TODO**   | .       | .    | .            | .        |       |
